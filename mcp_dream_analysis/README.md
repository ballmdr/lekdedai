# MCP Dream Analysis Service

## ‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°
‡∏£‡∏∞‡∏ö‡∏ö Machine Learning ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ù‡∏±‡∏ô‡πÅ‡∏•‡∏∞‡∏ó‡∏≥‡∏ô‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç ‡∏û‡∏£‡πâ‡∏≠‡∏° Model Context Protocol (MCP) ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÉ‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏ï‡πà‡∏≤‡∏á‡πÜ ‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö

## ‡∏Ñ‡∏∏‡∏ì‡∏™‡∏°‡∏ö‡∏±‡∏ï‡∏¥‡∏´‡∏•‡∏±‡∏Å
- ü§ñ **Machine Learning Model** ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ù‡∏±‡∏ô‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢
- üîó **MCP Protocol** ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ö‡∏™‡πà‡∏ß‡∏ô‡∏≠‡∏∑‡πà‡∏ô‡πÜ
- üì∞ **News Integration** ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏Ç‡πà‡∏≤‡∏ß‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏´‡∏≤‡πÄ‡∏•‡∏Ç‡πÄ‡∏î‡πá‡∏î
- üéØ **Django Integration** ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏á‡πà‡∏≤‡∏¢‡πÉ‡∏ô Django views ‡πÅ‡∏•‡∏∞ templates
- üìä **Hybrid Analysis** ‡∏£‡∏ß‡∏°‡∏£‡∏∞‡∏ö‡∏ö ML ‡πÅ‡∏•‡∏∞‡πÅ‡∏ö‡∏ö‡∏î‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏¥‡∏°

## ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå
```
mcp_dream_analysis/
‚îú‚îÄ‚îÄ dream_ml_model.py       # ML Model ‡∏´‡∏•‡∏±‡∏Å
‚îú‚îÄ‚îÄ mcp_server.py          # MCP Protocol Server
‚îú‚îÄ‚îÄ django_integration.py  # Django Integration Layer  
‚îú‚îÄ‚îÄ news_integration.py    # News Analysis Integration
‚îú‚îÄ‚îÄ data_preparation.py    # ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö ML
‚îú‚îÄ‚îÄ management/
‚îÇ   ‚îî‚îÄ‚îÄ commands/
‚îÇ       ‚îî‚îÄ‚îÄ train_dream_ml.py  # Django command ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ù‡∏∂‡∏Å‡∏™‡∏≠‡∏ô‡πÇ‡∏°‡πÄ‡∏î‡∏•
‚îî‚îÄ‚îÄ requirements.txt
```

## ‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á

### 1. ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Python packages
```bash
pip install -r mcp_dream_analysis/requirements.txt
```

### 2. ‡πÄ‡∏û‡∏¥‡πà‡∏° template tags ‡πÉ‡∏ô Django
‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÉ‡∏ô `INSTALLED_APPS`:
```python
INSTALLED_APPS = [
    # ... apps ‡∏≠‡∏∑‡πà‡∏ô‡πÜ
    'dreams',  # ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß
]
```

### 3. ‡∏ù‡∏∂‡∏Å‡∏™‡∏≠‡∏ô‡πÇ‡∏°‡πÄ‡∏î‡∏• ML (‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å)
```bash
cd app
python manage.py train_dream_ml --prepare-data
```

## ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô

### 1. ‡πÉ‡∏ô Django Views
```python
from mcp_dream_analysis.django_integration import analyze_dream_for_django

def my_view(request):
    result = analyze_dream_for_django("‡∏ù‡∏±‡∏ô‡πÄ‡∏´‡πá‡∏ô‡∏á‡∏π‡πÉ‡∏´‡∏ç‡πà")
    return JsonResponse(result)
```

### 2. ‡πÉ‡∏ô Django Templates
```html
{% load dream_analysis %}

<!-- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏Ç‡πà‡∏≤‡∏ß‡∏°‡∏µ‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ù‡∏±‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà -->
{% if article|has_dream_content %}
    <!-- ‡πÅ‡∏™‡∏î‡∏á‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ù‡∏±‡∏ô -->
    {% dream_analysis_card article %}
    
    <!-- ‡πÅ‡∏™‡∏î‡∏á‡πÅ‡∏Ñ‡πà‡πÄ‡∏•‡∏Ç‡πÄ‡∏î‡πá‡∏î -->
    {% dream_numbers_widget article|extract_dream_numbers "‡πÄ‡∏•‡∏Ç‡∏à‡∏≤‡∏Å‡∏Ç‡πà‡∏≤‡∏ß" %}
{% endif %}

<!-- ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ù‡∏±‡∏ô‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á -->
{% analyze_dream_text "‡∏ù‡∏±‡∏ô‡πÄ‡∏´‡πá‡∏ô‡∏ä‡πâ‡∏≤‡∏á" as dream_result %}
{% if dream_result.success %}
    <p>‡πÄ‡∏•‡∏Ç‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥: {{ dream_result.numbers|join:", " }}</p>
{% endif %}
```

### 3. ‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏Ç‡πà‡∏≤‡∏ß
```python
from mcp_dream_analysis.news_integration import analyze_news_article_for_dreams

# ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏Ç‡πà‡∏≤‡∏ß‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏´‡∏≤‡πÄ‡∏•‡∏Ç‡πÄ‡∏î‡πá‡∏î
result = analyze_news_article_for_dreams(
    news_title="‡∏ù‡∏±‡∏ô‡πÄ‡∏´‡πá‡∏ô‡∏á‡∏π‡∏ó‡∏≠‡∏á", 
    news_content="‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏Ç‡πà‡∏≤‡∏ß..."
)

if result['success'] and result['suggested_numbers']:
    print(f"‡πÄ‡∏•‡∏Ç‡πÄ‡∏î‡πá‡∏î: {result['suggested_numbers']}")
```

## ‡∏Å‡∏≤‡∏£‡∏ù‡∏∂‡∏Å‡∏™‡∏≠‡∏ô‡πÇ‡∏°‡πÄ‡∏î‡∏•

### ‡πÉ‡∏ä‡πâ Django Management Command
```bash
# ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏•‡∏∞‡∏ù‡∏∂‡∏Å‡∏™‡∏≠‡∏ô
python manage.py train_dream_ml --prepare-data

# ‡∏ù‡∏∂‡∏Å‡∏™‡∏≠‡∏ô‡∏à‡∏≤‡∏Å‡πÑ‡∏ü‡∏•‡πå‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà
python manage.py train_dream_ml --data-file custom_data.json
```

### ‡πÉ‡∏ä‡πâ Python Script ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á
```python
from mcp_dream_analysis.data_preparation import prepare_and_save_data
from mcp_dream_analysis.dream_ml_model import DreamNumberMLModel

# ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
training_data = prepare_and_save_data()

# ‡∏ù‡∏∂‡∏Å‡∏™‡∏≠‡∏ô‡πÇ‡∏°‡πÄ‡∏î‡∏•
model = DreamNumberMLModel()
model.train(training_data)
model.save_model()
```

## MCP Protocol API

### Analyze Dream
```json
{
  "method": "analyze_dream",
  "params": {
    "dream_text": "‡∏ù‡∏±‡∏ô‡πÄ‡∏´‡πá‡∏ô‡∏á‡∏π‡πÉ‡∏´‡∏ç‡πà‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß"
  }
}
```

### Predict Numbers (ML Only)
```json
{
  "method": "predict_numbers", 
  "params": {
    "dream_text": "‡∏ù‡∏±‡∏ô‡πÄ‡∏´‡πá‡∏ô‡∏ä‡πâ‡∏≤‡∏á",
    "num_predictions": 6
  }
}
```

### Train Model
```json
{
  "method": "train_model",
  "params": {
    "training_data": [...],
    "test_size": 0.2,
    "save_model": true
  }
}
```

## ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ù‡∏∂‡∏Å‡∏™‡∏≠‡∏ô

‡πÇ‡∏°‡πÄ‡∏î‡∏•‡πÉ‡∏ä‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å 3 ‡πÅ‡∏´‡∏•‡πà‡∏á:

1. **DreamKeyword** - ‡∏Ñ‡∏≥‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡πÅ‡∏•‡∏∞‡πÄ‡∏•‡∏Ç‡∏à‡∏≤‡∏Å‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
2. **DreamInterpretation** - ‡∏Å‡∏≤‡∏£‡∏ï‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏£‡∏¥‡∏á‡∏à‡∏≤‡∏Å‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
3. **Synthetic Data** - ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏±‡∏á‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡∏∂‡πâ‡∏ô

## ‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÅ‡∏ö‡∏ö Hybrid

‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡πÉ‡∏ä‡πâ‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏ú‡∏™‡∏°:

1. **ML Prediction** - ‡∏ñ‡πâ‡∏≤‡πÇ‡∏°‡πÄ‡∏î‡∏•‡∏ñ‡∏π‡∏Å‡∏ù‡∏∂‡∏Å‡πÅ‡∏•‡πâ‡∏ß
2. **Traditional Analysis** - ‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏ö‡∏ö‡∏î‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏¥‡∏° (fallback)
3. **Combined Results** - ‡∏£‡∏ß‡∏°‡∏ú‡∏•‡∏à‡∏≤‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏≠‡∏á‡∏ß‡∏¥‡∏ò‡∏µ

## ‡∏Å‡∏≤‡∏£ Debug ‡πÅ‡∏•‡∏∞ Monitoring

### ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ MCP
```html
{% load dream_analysis %}
{% mcp_status as status %}
{% if status.available %}
    <div class="alert alert-success">{{ status.message }}</div>
{% else %}
    <div class="alert alert-warning">{{ status.message }}</div>
{% endif %}
```

### Log Files
‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞ log ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏õ‡∏¢‡∏±‡∏á Django logging system:
```python
# ‡πÉ‡∏ô settings.py
LOGGING = {
    'loggers': {
        'mcp_dream_analysis': {
            'level': 'INFO',
            'handlers': ['console', 'file'],
        },
    }
}
```

## ‡∏Ç‡πâ‡∏≠‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏£‡∏∞‡∏ö‡∏ö

- Python 3.8+
- Django 3.2+
- Memory: ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 512MB ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö ML model
- Storage: 50MB ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö model files

## ‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏õ‡∏±‡∏ç‡∏´‡∏≤

### MCP Service ‡πÑ‡∏°‡πà‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á requirements
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö path ‡∏Ç‡∏≠‡∏á mcp_dream_analysis directory
- ‡∏î‡∏π Django error logs

### ‡πÇ‡∏°‡πÄ‡∏î‡∏• ML ‡πÑ‡∏°‡πà‡∏ó‡∏≥‡∏á‡∏≤‡∏ô
- ‡∏£‡∏±‡∏ô `python manage.py train_dream_ml --prepare-data`
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÑ‡∏ü‡∏•‡πå `dream_ml_model.pkl`
- ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞ fallback ‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏ö‡∏ö‡∏î‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏¥‡∏°‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥

### ‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û‡∏ä‡πâ‡∏≤
- ‡πÉ‡∏ä‡πâ async ‡πÉ‡∏ô production environment
- Cache ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏ö‡πà‡∏≠‡∏¢
- ‡∏õ‡∏£‡∏±‡∏ö batch_size ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•

## ‡∏Å‡∏≤‡∏£‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏ï‡πà‡∏≠

### ‡πÄ‡∏û‡∏¥‡πà‡∏° Model ‡πÉ‡∏´‡∏°‡πà
```python
class NewDreamModel(DreamNumberMLModel):
    def __init__(self):
        super().__init__()
        # ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÇ‡∏°‡πÄ‡∏î‡∏•‡πÉ‡∏´‡∏°‡πà
```

### ‡πÄ‡∏û‡∏¥‡πà‡∏° MCP Method ‡πÉ‡∏´‡∏°‡πà
```python
async def _handle_new_method(self, params: Dict[str, Any]) -> Dict[str, Any]:
    # Implementation
    pass
```

## License
MIT License - ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏ü‡∏£‡∏µ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö LekDedAI project