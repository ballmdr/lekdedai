# ЁЯОп Lottery Checker - р╕гр╕░р╕Ър╕Ър╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕лр╕зр╕вр╣Гр╕лр╕бр╣И

р╕гр╕░р╕Ър╕Ър╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕лр╕зр╕вр╕Чр╕╡р╣Ир╕Фр╕╢р╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Ир╕▓р╕Б GLO API р╣Бр╕ер╕░р╕Ър╕▒р╕Щр╕Чр╕╢р╕Бр╕ер╕Зр╕Рр╕▓р╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕е Django

## тЬи р╕Др╕╕р╕Ур╕кр╕бр╕Ър╕▒р╕Хр╕┤р╣Гр╕лр╕бр╣И

- ЁЯФД **р╕гр╕░р╕Ър╕Ър╕нр╕▒р╕Ир╕Йр╕гр╕┤р╕вр╕░**: р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╕▒р╕Щр╕Чр╕╡р╣Ир╕Бр╣Ир╕нр╕Щ р╕Цр╣Йр╕▓р╕вр╕▒р╕Зр╣Др╕бр╣Ир╕бр╕╡р╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Гр╕Щр╕Рр╕▓р╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Бр╣Зр╕Фр╕╢р╕Зр╕Ир╕▓р╕Б API р╣Бр╕ер╣Йр╕зр╕Ър╕▒р╕Щр╕Чр╕╢р╕Б
- ЁЯТ╛ **р╣Ар╕Бр╣Зр╕Ър╕Вр╣Йр╕нр╕бр╕╣р╕ер╕нр╕▒р╕Хр╣Вр╕Щр╕бр╕▒р╕Хр╕┤**: р╕Ър╕▒р╕Щр╕Чр╕╢р╕Бр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕лр╕зр╕вр╕ер╕Зр╕Рр╕▓р╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Вр╕Фр╕вр╕нр╕▒р╕Хр╣Вр╕Щр╕бр╕▒р╕Хр╕┤
- ЁЯЪА **р╕Ыр╕гр╕░р╕кр╕┤р╕Чр╕Шр╕┤р╕ар╕▓р╕Юр╕кр╕╣р╕З**: р╣Гр╕Кр╣Йр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Ир╕▓р╕Бр╕Рр╕▓р╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Цр╣Йр╕▓р╕бр╕╡р╣Бр╕ер╣Йр╕з р╣Др╕бр╣Ир╕Хр╣Йр╕нр╕Зр╣Ар╕гр╕╡р╕вр╕Б API р╕Лр╣Йр╕│
- ЁЯО▓ **р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╣Ар╕ер╕Вр╕лр╕зр╕в**: р╕гр╕░р╕Ър╕Ър╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╣Ар╕ер╕Вр╕лр╕зр╕вр╕зр╣Ир╕▓р╕Цр╕╣р╕Бр╕гр╕▓р╕Зр╕зр╕▒р╕ер╕лр╕гр╕╖р╕нр╣Др╕бр╣И
- ЁЯЧСя╕П **р╕ер╣Йр╕▓р╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕е**: р╕кр╕▓р╕бр╕▓р╕гр╕Цр╕ер╣Йр╕▓р╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Фр╣Бр╕ер╕░р╕Фр╕╢р╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Гр╕лр╕бр╣Ир╣Др╕Фр╣Й
- ЁЯУК **р╕кр╕Цр╕┤р╕Хр╕┤р╕Вр╣Йр╕нр╕бр╕╣р╕е**: р╣Бр╕кр╕Фр╕Зр╕кр╕Цр╕┤р╕Хр╕┤р╕Вр╣Йр╕нр╕бр╕╣р╕ер╕лр╕зр╕вр╣Гр╕Щр╕гр╕░р╕Ър╕Ъ

## ЁЯЪА р╕Бр╕▓р╕гр╕Хр╕┤р╕Фр╕Хр╕▒р╣Йр╕З

### 1. р╕Хр╕┤р╕Фр╕Хр╕▒р╣Йр╕З Dependencies

```bash
pip install -r requirements.txt
```

### 2. р╕гр╕▒р╕Щ Migrations

```bash
python manage.py makemigrations lottery_checker
python manage.py migrate
```

## ЁЯУЦ р╕Бр╕▓р╕гр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щ

### Django Management Commands

#### р╕ер╣Йр╕▓р╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Фр╣Бр╕ер╕░р╕Фр╕╢р╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Гр╕лр╕бр╣И
```bash
# р╕ер╣Йр╕▓р╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Бр╕ер╕░р╕Фр╕╢р╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕е 30 р╕зр╕▒р╕Щр╕ер╣Ир╕▓р╕кр╕╕р╕Ф (р╕Цр╕▓р╕бр╕вр╕╖р╕Щр╕вр╕▒р╕Щ)
python manage.py clear_and_fetch_lotto

# р╕ер╣Йр╕▓р╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Бр╕ер╕░р╕Фр╕╢р╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕е 60 р╕зр╕▒р╕Щр╕ер╣Ир╕▓р╕кр╕╕р╕Ф (р╣Др╕бр╣Ир╕Цр╕▓р╕бр╕вр╕╖р╕Щр╕вр╕▒р╕Щ)
python manage.py clear_and_fetch_lotto --days-back 60 --force
```

### API Endpoints

#### р╕Фр╕╢р╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕лр╕зр╕в
```http
POST /lottery_checker/api/lotto/result/
Content-Type: application/json

{
    "date": 15,
    "month": 1,
    "year": 2025
}
```

#### р╕Фр╕╢р╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕ер╣Ир╕▓р╕кр╕╕р╕Ф
```http
GET /lottery_checker/api/lotto/latest/?days=7
```

#### р╕Фр╕╢р╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕зр╕▒р╕Щр╕Чр╕╡р╣Ир╣Ар╕Йр╕Юр╕▓р╕░
```http
GET /lottery_checker/api/lotto/date/2025/1/15/
```

#### р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╣Ар╕ер╕Вр╕лр╕зр╕в
```http
POST /lottery_checker/api/lotto/check/
Content-Type: application/json

{
    "date": 15,
    "month": 1,
    "year": 2025,
    "number": "123456"
}
```

#### р╕ер╣Йр╕▓р╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф
```http
POST /lottery_checker/api/lotto/clear/
```

#### р╕Фр╕╢р╕Зр╕кр╕Цр╕┤р╕Хр╕┤р╕Вр╣Йр╕нр╕бр╕╣р╕е
```http
GET /lottery_checker/api/lotto/statistics/
```

## ЁЯПЧя╕П р╣Вр╕Др╕гр╕Зр╕кр╕гр╣Йр╕▓р╕Зр╕гр╕░р╕Ър╕Ъ

### р╣Вр╕бр╣Ар╕Фр╕ер╣Гр╕лр╕бр╣И (LottoResult)

- `draw_date`: р╕зр╕▒р╕Щр╕Чр╕╡р╣Ир╕нр╕нр╕Бр╕гр╕▓р╕Зр╕зр╕▒р╕е (unique)
- `result_data`: р╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Ьр╕ер╕гр╕▓р╕Зр╕зр╕▒р╕ер╕Ир╕▓р╕Б API (JSON)
- `source`: р╣Бр╕лр╕ер╣Ир╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕е
- `created_at`: р╕зр╕▒р╕Щр╕Чр╕╡р╣Ир╕кр╕гр╣Йр╕▓р╕З
- `updated_at`: р╕зр╕▒р╕Щр╕Чр╕╡р╣Ир╕нр╕▒р╕Ыр╣Ар╕Фр╕Х

### LottoService

- `fetch_from_api()`: р╕Фр╕╢р╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Ир╕▓р╕Б GLO API
- `get_or_fetch_result()`: р╕Фр╕╢р╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Ир╕▓р╕Бр╕Рр╕▓р╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕е р╕лр╕гр╕╖р╕нр╕Фр╕╢р╕Зр╕Ир╕▓р╕Б API р╕Цр╣Йр╕▓р╕вр╕▒р╕Зр╣Др╕бр╣Ир╕бр╕╡
- `save_to_database()`: р╕Ър╕▒р╕Щр╕Чр╕╢р╕Бр╕ер╕Зр╕Рр╕▓р╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕е
- `clear_all_data()`: р╕ер╣Йр╕▓р╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф
- `get_statistics()`: р╕Фр╕╢р╕Зр╕кр╕Цр╕┤р╕Хр╕┤р╕Вр╣Йр╕нр╕бр╕╣р╕е

## ЁЯФД р╕зр╕┤р╕Шр╕╡р╕Бр╕▓р╕гр╕Чр╕│р╕Зр╕▓р╕Щ

1. **р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╕▒р╕Щр╕Чр╕╡р╣И**: р╕гр╕░р╕Ър╕Ър╕Ир╕░р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓р╕зр╕▒р╕Щр╕Чр╕╡р╣Ир╕Чр╕╡р╣Ир╕Хр╣Йр╕нр╕Зр╕Бр╕▓р╕гр╕бр╕╡р╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Гр╕Щр╕Рр╕▓р╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕лр╕гр╕╖р╕нр╣Др╕бр╣И
2. **р╕Фр╕╢р╕Зр╕Ир╕▓р╕Бр╕Рр╕▓р╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕е**: р╕Цр╣Йр╕▓р╕бр╕╡р╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Бр╕ер╣Йр╕з р╕Ир╕░р╕Фр╕╢р╕Зр╕Ир╕▓р╕Бр╕Рр╕▓р╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Чр╕▒р╕Щр╕Чр╕╡
3. **р╕Фр╕╢р╕Зр╕Ир╕▓р╕Б API**: р╕Цр╣Йр╕▓р╣Др╕бр╣Ир╕бр╕╡р╕Вр╣Йр╕нр╕бр╕╣р╕е р╕Ир╕░р╕Фр╕╢р╕Зр╕Ир╕▓р╕Б GLO API
4. **р╕Ър╕▒р╕Щр╕Чр╕╢р╕Бр╕ер╕Зр╕Рр╕▓р╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕е**: р╕Ър╕▒р╕Щр╕Чр╕╢р╕Бр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Чр╕╡р╣Ир╣Др╕Фр╣Йр╕Ир╕▓р╕Б API р╕ер╕Зр╕Рр╕▓р╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕е
5. **р╕кр╣Ир╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Бр╕ер╕▒р╕Ъ**: р╕кр╣Ир╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Бр╕ер╕▒р╕Ър╣Гр╕лр╣Йр╕Ьр╕╣р╣Йр╣Гр╕Кр╣Й

## ЁЯОи Web Interface

- **р╕Яр╕нр╕гр╣Мр╕бр╕Др╣Йр╕Щр╕лр╕▓р╕Вр╣Йр╕нр╕бр╕╣р╕ер╕лр╕зр╕в**: р╕Др╣Йр╕Щр╕лр╕▓р╕Вр╣Йр╕нр╕бр╕╣р╕ер╕лр╕зр╕вр╕Хр╕▓р╕бр╕зр╕▒р╕Щр╕Чр╕╡р╣И
- **р╕Яр╕нр╕гр╣Мр╕бр╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╣Ар╕ер╕Вр╕лр╕зр╕в**: р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╣Ар╕ер╕Вр╕лр╕зр╕вр╕зр╣Ир╕▓р╕Цр╕╣р╕Бр╕гр╕▓р╕Зр╕зр╕▒р╕ер╕лр╕гр╕╖р╕нр╣Др╕бр╣И
- **р╕Хр╕▓р╕гр╕▓р╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕ер╣Ир╕▓р╕кр╕╕р╕Ф**: р╣Бр╕кр╕Фр╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕лр╕зр╕вр╕ер╣Ир╕▓р╕кр╕╕р╕Фр╣Гр╕Щр╕гр╕░р╕Ър╕Ъ
- **р╕Ыр╕╕р╣Ир╕бр╕гр╕╡р╣Ар╕Яр╕гр╕К**: р╕гр╕╡р╣Ар╕Яр╕гр╕Кр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕ер╣Ир╕▓р╕кр╕╕р╕Ф
- **р╕Ыр╕╕р╣Ир╕бр╕ер╣Йр╕▓р╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕е**: р╕ер╣Йр╕▓р╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Фр╣Гр╕Щр╕гр╕░р╕Ър╕Ъ

## ЁЯзк р╕Бр╕▓р╕гр╕Чр╕Фр╕кр╕нр╕Ъ

### р╕Чр╕Фр╕кр╕нр╕Ър╕Бр╕▓р╕гр╕Чр╕│р╕Зр╕▓р╕Щр╕Вр╕нр╕З Service

```python
from lottery_checker.lotto_service import LottoService

service = LottoService()

# р╕Фр╕╢р╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕лр╕зр╕вр╕зр╕▒р╕Щр╕Щр╕╡р╣Й
result = service.get_or_fetch_result(
    date=15,
    month=1,
    year=2025
)

print(result)
```

### р╕Чр╕Фр╕кр╕нр╕Ъ API

```bash
# р╕Чр╕Фр╕кр╕нр╕Ър╕Фр╕╢р╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕лр╕зр╕в
curl -X POST http://localhost:8000/lottery_checker/api/lotto/result/ \
  -H "Content-Type: application/json" \
  -d '{"date": 15, "month": 1, "year": 2025}'

# р╕Чр╕Фр╕кр╕нр╕Ър╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╣Ар╕ер╕Вр╕лр╕зр╕в
curl -X POST http://localhost:8000/lottery_checker/api/lotto/check/ \
  -H "Content-Type: application/json" \
  -d '{"date": 15, "month": 1, "year": 2025, "number": "123456"}'
```

## ЁЯФз р╕Бр╕▓р╕гр╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓

### Environment Variables

```bash
# GLO API settings (р╕Цр╣Йр╕▓р╕Хр╣Йр╕нр╕Зр╕Бр╕▓р╕гр╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щ)
GLO_API_URL=https://www.glo.or.th/api/checking/getLotteryResult
```

### Django Settings

р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓ `lottery_checker` р╕нр╕вр╕╣р╣Ир╣Гр╕Щ `INSTALLED_APPS`:

```python
INSTALLED_APPS = [
    # ... apps р╕нр╕╖р╣Ир╕Щр╣Ж
    'lottery_checker',
]
```

## ЁЯУЭ р╕Бр╕▓р╕гр╕Юр╕▒р╕Тр╕Щр╕▓

### р╣Ар╕Юр╕┤р╣Ир╕бр╕Яр╕╡р╣Ар╕Ир╕нр╕гр╣Мр╣Гр╕лр╕бр╣И

1. р╣Бр╕Бр╣Йр╣Др╕В `models.py` р╕кр╕│р╕лр╕гр╕▒р╕Ър╣Вр╕Др╕гр╕Зр╕кр╕гр╣Йр╕▓р╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Гр╕лр╕бр╣И
2. р╕нр╕▒р╕Ыр╣Ар╕Фр╕Х `lotto_service.py` р╕кр╕│р╕лр╕гр╕▒р╕Ър╕Яр╕▒р╕Зр╕Бр╣Мр╕Кр╕▒р╕Щр╣Гр╕лр╕бр╣И
3. р╣Ар╕Юр╕┤р╣Ир╕б API endpoints р╣Гр╕Щ `views.py`
4. р╕нр╕▒р╕Ыр╣Ар╕Фр╕Х `urls.py` р╕кр╕│р╕лр╕гр╕▒р╕Ъ routing р╣Гр╕лр╕бр╣И
5. р╣Ар╕Юр╕┤р╣Ир╕б UI elements р╣Гр╕Щ template

### р╕Бр╕▓р╕гр╣Бр╕Бр╣Йр╣Др╕Вр╕Ър╕▒р╣Кр╕Б

1. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ logs р╣Гр╕Щ Django console
2. р╣Гр╕Кр╣Й Django debug toolbar р╕кр╕│р╕лр╕гр╕▒р╕Ър╕Бр╕▓р╕г debug
3. р╕Чр╕Фр╕кр╕нр╕Ъ API endpoints р╕Фр╣Йр╕зр╕в Postman р╕лр╕гр╕╖р╕н curl

## ЁЯЪи р╕лр╕бр╕▓р╕вр╣Ар╕лр╕Хр╕╕р╕кр╕│р╕Др╕▒р╕Н

- **р╕Бр╕▓р╕гр╕ер╣Йр╕▓р╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕е**: р╕Бр╕▓р╕гр╕ер╣Йр╕▓р╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Фр╕Ир╕░р╕ер╕Ър╕Вр╣Йр╕нр╕бр╕╣р╕ер╕лр╕зр╕вр╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Фр╣Гр╕Щр╕гр╕░р╕Ър╕Ъ
- **API Rate Limiting**: GLO API р╕нр╕▓р╕Ир╕бр╕╡р╕Вр╣Йр╕нр╕Ир╕│р╕Бр╕▒р╕Фр╣Гр╕Щр╕Бр╕▓р╕гр╣Ар╕гр╕╡р╕вр╕Бр╣Гр╕Кр╣Й
- **р╕Вр╣Йр╕нр╕бр╕╣р╕ер╕нр╕нр╕Яр╣Др╕ер╕Щр╣М**: р╕гр╕░р╕Ър╕Ър╕Ир╕░р╕Чр╕│р╕Зр╕▓р╕Щр╣Др╕Фр╣Йр╣Бр╕бр╣Йр╣Др╕бр╣Ир╕бр╕╡р╕нр╕┤р╕Щр╣Ар╕Чр╕нр╕гр╣Мр╣Ар╕Щр╣Зр╕Х (р╣Гр╕Кр╣Йр╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Гр╕Щр╕Рр╕▓р╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕е)

## ЁЯУЮ р╕Бр╕▓р╕гр╕кр╕Щр╕▒р╕Ър╕кр╕Щр╕╕р╕Щ

р╕лр╕▓р╕Бр╕бр╕╡р╕Др╕│р╕Цр╕▓р╕бр╕лр╕гр╕╖р╕нр╕Ыр╕▒р╕Нр╕лр╕▓:

1. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ logs р╣Гр╕Щ Django console
2. р╕Чр╕Фр╕кр╕нр╕Ъ API endpoints р╕Фр╣Йр╕зр╕в Postman
3. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕Бр╕▓р╕гр╣Ар╕Кр╕╖р╣Ир╕нр╕бр╕Хр╣Ир╕нр╕Рр╕▓р╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕е
4. р╕кр╕гр╣Йр╕▓р╕З issue р╣Гр╕Щ repository
